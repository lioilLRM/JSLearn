<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <button onclick="downFile()">ä¸‹è½½</button>  
  --  æ³¨æ„ æ­¤å¤„button åªæ˜¯ä¸€ä¸ªè§¦å‘ä¸‹è½½æ–‡ä»¶çš„æ—¶æœºï¼Œå¯æ ¹æ®å…·ä½“ä¸šåŠ¡éœ€æ±‚ä¿®æ”¹
<script>

      //æ–‡ä»¶ä¸‹è½½
      function  downFile() {
      // let fileUrl = "http://192.168.3.102:9000/group1/M00/00/40/wKgDZmX4D2iANATiAAF9Se5IIHk248.jpg";  //æœåŠ¡å™¨æ–‡ä»¶åœ°å€
      // let fileUrl = 'https://p1.itc.cn/images01/20230923/3c762b38c58241099909aa1c1f81ded0.jpeg'
      let fileUrl = 'https://s1.juimg.top/uploads/2024/03/d12bc89e51007b2-scaled.jpg'
      getBlob(fileUrl).then(blob => {
        console.log("ğŸš€ ~ getBlob ~ blob:", blob)
        
        // saveAs(blob, 'ä¿¡ç”¨æƒè¯ä½¿ç”¨å¯¼å…¥æ¨¡æ¿ä»¶å.xlsx')
      })
    }

      //é€šè¿‡æ–‡ä»¶ä¸‹è½½urlæ‹¿åˆ°å¯¹åº”çš„blobå¯¹è±¡
      function getBlob(url) {
      return new Promise(resolve => {
        const xhr = new XMLHttpRequest()
        xhr.open('GET', url, true)
        xhr.responseType = 'blob'
        xhr.send()

        xhr.onload = () => {
          if (xhr.status === 200) {
            console.log("ğŸš€ ~ getBlob ~ xhr.response:", xhr.response)
            resolve(xhr.response)
          }
        }

      })
    }

        //ä¸‹è½½æ–‡ä»¶ ã€€ã€€jsæ¨¡æ‹Ÿç‚¹å‡»aæ ‡ç­¾è¿›è¡Œä¸‹è½½
    function  saveAs(blob, filename) {
      var link = document.createElement('a')
      link.href = window.URL.createObjectURL(blob)
      link.download = filename
      link.click()
    }


  //ä¸‹è½½æ–‡ä»¶
// function downFile(){
//   console.log('å¼€å§‹ä¸‹è½½')
//     // var url="http://192.168.3.102:9000/group1/M00/00/40/wKgDZmX4D2iANATiAAF9Se5IIHk248.jpg";
//     var url="https://csdnimg.cn/medal/fenxiangdaren@240.png";

//     var xhr=new XMLHttpRequest();
//     xhr.open("GET",url,true);
//     xhr.responseType='blob';
//     xhr.onload=function(e){
//         console.log("ğŸš€ ~ downFile ~ e:", e)
//         if (xhr.status === 200) {
//             var fileName=getFileName(url);//è·å–æ–‡ä»¶å
//             saveFile(xhr.response,fileName);
//         }
//     }
// }
// //ä¿å­˜æ–‡ä»¶
// function saveFile(data,fileName){
//     var export_blob=new Blob([data]);
//     var save_link=document.createElement('a');
//     document.body.appendChild(save_link);
//     save_link.style.display='none';
//     var urlObject=window.URL.createObjectURL(export_blob);
//     save_link.href=urlObject;
//     save_link.download=fileName;
//     save_link.click();
//     document.body.removeChild(save_link);
// }
// //æ ¹æ®urlè·å–æ–‡ä»¶å
// function getFileName(url){
//     var num=url.lastIndexOf("/")+1;
//     var fileName=url.substring(num);
//     fileName=decodeURI(fileName.split("?")[0]);
//     return fileName;
// }
</script>
</body>
</html>