<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>worker performance optimization</title>
</head>
<body>
  <!-- <h1>hello world</h1>
  <div id="container"></div> -->
  <!-- 说明：Chrome devtools 的Performance 工具使用分析性能问题以及使用worker优化计算量大导致主线程卡顿的问题 -->
  <script>
    function runWorker(url, num) {
      return new Promise(function(resolve, reject) {
        const worker = new Worker(url)
        worker.postMessage(num)
        worker.addEventListener('message', function(evt) {
          resolve(evt.data)
        })
        worker.onerror = reject
      })
    }
  </script>
    <script>
        function a() {
           b();
        }
        function b() {
            let total = 0;
            for(let i = 0; i< 10*10000*10000; i++) {
                total += i;
            }
            console.log('b:', total);
           
        }
        function editDom() {
          let dom = document.getElementById('container');
          dom.innerHTML = 'Create dom'
        }

        a();
    </script>
    <script>
        function c() {
            d();
        }
        function d() {
            let total = 0;
            for(let i = 0; i< 1*10000*10000; i++) {
                total += i;
            }
            console.log('c:', total);
           
        }
        c();
    </script>
</body>
</html>
